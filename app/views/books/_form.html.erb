<%= render 'shared/errors', obj: @book %>

<div class="col-xs-8 col-xs-offset-2">
  <%= form_for(@book) do |f| %>
    <div class="field">
      <%= f.label :title %><br>
      <%= f.text_field :title, class: "form-control" %>
    </div>
    <div class="field">
      <%= f.label :author %><br>
      <%= f.text_field :author, class: "form-control" %>
    </div>
    <div class="field">
      <%= f.label :genre %><br>
      <%= f.text_field :genre, class: "form-control" %>
    </div>
    <div class="field">
      <%= f.label :isbn %><br>
      <%= f.text_field :isbn, class: "form-control" %>
    </div>
    <div class="field">
      <%= f.label :publish_date, "Publish Date" %><br>
       <input type="text" name="book[publish_date]" id="book_publish_date" class="form-control datepicker-edit">
    </div>
    <div class="field">
      <%= f.label :publisher %><br>
      <%= f.text_field :publisher, class: "form-control" %>
    </div>
    <div class="field">
      <%= f.label :description %><br>
      <%= f.text_area :description, class: "form-control" %>
    </div>
    <div class="field">
      <%= f.label :image %><br>
      <%= f.text_field :image, class: "form-control" %>
    </div>
    <div class="actions text-center">
      <%= f.submit( @book.new_record? ? "Create" : "Update", class: "btn btn-success") %>
    </div>
  
    <script>
      $(function () {
        var bool = <%= @book.new_record? %>;
        if(!bool) {
          var t = "<%= @book.publish_date %>";
          t = new Date(t);
          $('.datepicker-edit').val(moment(t).format('YYYY/MM/DD'));
        }
        
        $('.datepicker-edit').datepicker({
          format: {
            toDisplay: function (date, format, language) {
              var d = new Date(date);
              d.setDate(d.getDate() + 1);
              d = moment(d).format('YYYY/MM/DD');
              return d
            },
            toValue: function (date, format, language) {
              var d = new Date(date);
              d.setDate(d.getDate() + 1);
              d = moment(d).format('YYYY/MM/DD');
              return d
            }
          }
        });
      });
    </script>
  <% end %>
</div>